import{r as j,a as M,d as L,o,b as d,e as t,I as B,j as n,p as y,g as v,t as b,h as l,F as T,l as N,q as X,a0 as q,a4 as A,ad as K,a5 as Q,a6 as W,_ as Y,n as Z,x as ee,y as te,a3 as C,z as se,ae,af as oe,f as m,ag as ie,k as D,ah as ne,a1 as le,L as de,ac as re}from"./index_c330695b.js";import{u as ce,r as H,m as me}from"./index_69323011.js";const ue={form:{name:{required:H,min:me(8)},summary_tasks:{required:H}}},fe=j([{title:""},{title:""},{title:""}]),S={id:"",name:"",description:"",summary_tasks:"-",job_descs:fe.value},f=j(!1),g=M({...S}),E=ce(ue,{form:g},{$lazy:!1}),O=_=>{Object.assign(g,_)},_e=()=>{S.job_descs=[{title:""},{title:""},{title:""}],E.value.$reset(),Object.assign(g,S)},P=_=>{f.value=!0,O(_)};function pe(){O(S),f.value=!0}function G(){_e(),f.value=!1}const J=_=>(ee("data-v-1986abaa"),_=_(),te(),_),he={class:"form-position-component-wrap"},ve={key:0,class:"form-header align-items-center sticky-top bg-white py-2 mb-3 sticky-header"},be={class:"float-end ms-auto top-2 right-5"},ge={class:"form-title mb-0"},$e={class:"form-description text-xs"},ye={class:"form-body"},xe=J(()=>t("hr",null,null,-1)),ke={class:"d-flex align-items-center"},we={key:0,class:"mb-5"},Ce={class:"text-xs list-group list-group-numbered"},Fe={class:"list-group-item d-flex align-items-start py-2 pe-2"},Ve={key:0,class:"ms-2 w-100 d-flex"},je={class:"actions text-sm ms-auto cursor-pointer ps-2 d-flex flex-column justify-content-between"},Be=["onClick"],Se=J(()=>t("i",{class:"fas fa-save text-primary"},null,-1)),Ie={class:"fw-bold"},Re={class:"text-sm ms-auto cursor-pointer d-flex justify-content-between ps-2"},Ee=["onClick"],Je=["onClick"],Ue={class:"list-group-item unnumbered d-flex align-items-start py-2 pe-2"},ze={class:"ms-2 w-100 d-flex"},Te=J(()=>t("div",{class:"fw-200 font-italic"},"tambah rincian tugas",-1)),Ne={class:"text-sm ms-auto cursor-pointer d-flex align-items-end ps-2"},De={key:1,class:"text-xs list-group list-group-numbered mb-5"},He={class:"list-group-item d-flex justify-content-between align-items-center"},Pe=["onClick"],Ge={class:"d-flex mt-2 sticky-bottom bottom-4"},Le=L({__name:"FormPosition",props:{showForm:{type:[String,Boolean],default:!0},hideHeader:{type:[String,Boolean],default:!1},cancel:{},form:{},handleSubmit:{},v$:{}},setup(_){const p=_,x=(e=!1)=>{e?p.form.job_descs.push({title:"",_inline:!0}):p.form.job_descs.push({title:""});let s=document.getElementById("modal-form-jabatan");s==null||s.scrollBy(0,100)},k=e=>{var s=p.form.job_descs.at(e);s!=null&&s.id?R(s.id).then(({status:i,data:c})=>{i===200&&p.form.job_descs.splice(e,1)}):p.form.job_descs.splice(e,1)},I=e=>{e._inline=!0},F=(e,s)=>{s.id?s._inline=!1:k(e)},R=async e=>{const{status:s,data:i}=await C.apiClient.delete(`/api/jobdesc/${e}`).then(({status:c,data:h})=>({status:c,data:h}));return{status:s,data:i}};return(e,s)=>{var U,z;const i=q,c=A,h=K,u=Q,r=W,V=Y;return o(),d("div",he,[p.hideHeader?v("",!0):(o(),d("div",ve,[t("span",be,[e.showForm?(o(),B(i,{key:0,variant:"outline-info",size:"sm",class:"mb-0 px-3",onClick:e.cancel},{default:n(()=>[y(" x ")]),_:1},8,["onClick"])):v("",!0)]),t("h5",ge,b((U=e.form)!=null&&U.id?"Edit Jabatan":" Jabatan Baru"),1),t("div",$e,"Form "+b((z=e.form)!=null&&z.id?"Edit ":" Tambah")+" Jabatan",1)])),t("div",ye,[l(V,{id:"form-postion-component",floating:!0,onSubmit:X(e.handleSubmit,["prevent"])},{default:n(()=>[l(u,{id:"fieldset-1",label:"Nama Jabatan","label-for":"input-floating-1","label-class":"ps-2",state:e.v$.form.name.$dirty?!e.v$.form.name.$invalid:void 0,floating:"",class:"mb-3"},{default:n(()=>[l(c,{id:"input-floating-1",modelValue:e.v$.form.name.$model,"onUpdate:modelValue":s[0]||(s[0]=a=>e.v$.form.name.$model=a),state:e.v$.form.name.$dirty?!e.v$.form.name.$invalid:void 0,placeholder:"Enter name please",trim:""},null,8,["modelValue","state"]),l(h,{class:"text-xxs"},{default:n(()=>{var a;return[y(b((a=e.v$.form.name.$errors[0])==null?void 0:a.$message),1)]}),_:1})]),_:1},8,["state"]),l(u,{id:"fieldset-2",label:"Ringkasan Tugas","label-for":"textarea","label-class":"ps-2",state:e.v$.form.summary_tasks.$dirty?!e.v$.form.summary_tasks.$invalid:void 0,class:"mb-3",floating:""},{default:n(()=>[l(r,{id:"textarea",modelValue:e.v$.form.summary_tasks.$model,"onUpdate:modelValue":s[1]||(s[1]=a=>e.v$.form.summary_tasks.$model=a),state:e.v$.form.summary_tasks.$dirty?!e.v$.form.summary_tasks.$invalid:void 0,placeholder:"Ringkasan Tugas",rows:"4","max-rows":"4"},null,8,["modelValue","state"]),l(h,{class:"text-xxs"},{default:n(()=>{var a;return[y(b((a=e.v$.form.summary_tasks.$errors[0])==null?void 0:a.$message),1)]}),_:1})]),_:1},8,["state"]),xe,t("h6",ke,[y(" Rincian Tugas : "),e.form.id?v("",!0):(o(),d("a",{key:0,href:"javascript:;",class:"badge bagde-info bg-gradient-info text-xxs text-end float-end top-2 ms-auto",onClick:x}," +  "))]),e.form.id?(o(),d("div",we,[t("ol",Ce,[(o(!0),d(T,null,N(e.form.job_descs,(a,w)=>(o(),d("li",Fe,[a._inline?(o(),d("div",Ve,[l(u,{class:"d-block w-100 me-2"},{default:n(()=>[l(r,{modelValue:a.title,"onUpdate:modelValue":$=>a.title=$,class:"w-100 form-control-sm"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t("div",je,[t("i",{class:"fas fa-times text-secondary",onClick:$=>F(w,a)},null,8,Be),Se])])):(o(),d("div",{key:1,class:Z(["ms-2 w-100 d-flex",{"font-italic text-primary":!(a!=null&&a.id)}])},[t("div",Ie,b(a.title),1),t("div",Re,[t("i",{class:"fas fa-trash text-danger px-2",onClick:$=>k(w)},null,8,Ee),t("i",{class:"fas fa-edit text-warning ps-1",onClick:$=>I(a)},null,8,Je)])],2))]))),256)),t("li",Ue,[t("div",ze,[l(u,{class:"d-block w-100 me-2"},{default:n(()=>[Te]),_:1}),t("div",Ne,[t("i",{class:"fas fa-plus text-primary ps-1",onClick:s[2]||(s[2]=a=>x(!0))})])])])])])):(o(),d("ol",De,[(o(!0),d(T,null,N(e.form.job_descs,(a,w)=>(o(),d("li",He,[l(u,{id:"fieldset-{i}","label-class":"ps-2",state:!0,class:"w-100 ms-3"},{default:n(()=>[l(c,{class:"form-control-sm",modelValue:a.title,"onUpdate:modelValue":$=>a.title=$,placeholder:`${w+1}. tulis rincian tugas pada jabatan ini.`,rows:"1","max-rows":"3"},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),e.form.job_descs.length>1?(o(),d("a",{key:0,href:"javascript:;",class:"fw-bold text-danger text-xxs text-end float-end top-2 ms-auto ps-3",onClick:$=>k(w)}," X  ",8,Pe)):v("",!0)]))),256))])),t("div",Ge,[e.form.id?v("",!0):(o(),B(i,{key:0,variant:"secondary",size:"sm",onClick:x},{default:n(()=>[y(" + Row ")]),_:1})),l(i,{type:"submit",variant:"info",size:"sm",class:"btn-gradient-info ms-auto",disabled:e.v$.form.$invalid},{default:n(()=>[y(" Submit ")]),_:1},8,["disabled"])])]),_:1},8,["onSubmit"])])])}}});const qe=se(Le,[["__scopeId","data-v-1986abaa"]]),Oe={class:"mx-sm-4 mx-1"},Me={class:"card-header-wrap"},Xe={class:"ms-auto my-auto d-flex gap-3 mt-lg-0 align-items-center float-end"},Ae=t("div",null,[t("h5",{class:"mb-0"},"Jabatan & Tupoksi"),t("p",{class:"text-xs mb-0"},"daftar list jabatan")],-1),Ke={class:"text-sm-center text-end float-none float-sm-none pe-2 text-nowrap"},Qe=["item-id","onClick"],We=t("i",{class:"fas fa-trash","aria-hidden":"true"},null,-1),Ye=[We],Ze=["item-id","onClick"],et=t("i",{class:"fas fa-user-edit","aria-hidden":"true"},null,-1),tt=[et],st={class:"d-flex px-2 py-1 gap-3 ps-3 align-items-center"},at={class:"d-flex flex-column justify-content-center"},ot={class:"mb-0 text-primary text-sm"},it={class:"text-xs text-secondary mb-0"},nt=["onClick"],rt=L({__name:"jabatan",setup(_){const p=j(null),x=j([]),k=[{key:"name",label:"Jabatan",class:"align-middle"},{key:"action",class:"align-middle text-center",thStyle:{width:"115px"}}],I=async function(){try{const{data:s}=await C.apiClient.get("/api/position");return s.data}catch{return[]}},F=ae(),R=async()=>{var c;if(await E.value.$validate()){var i;if(g.id){const{status:h,data:u}=await C.apiClient.put(`/api/position/${g.id}`,g);i={status:h,data:u}}else{const{status:h,data:u}=await C.apiClient.post("/api/position",g);i={status:h,data:u}}(i.status===200||i.status===201)&&(G(),(c=p.value)==null||c.refresh())}},e=s=>{confirm("delete confirm")&&C.apiClient.delete(`/api/position/${s.id}`).then(({status:i})=>{var c;i===200&&((c=p.value)==null||c.refresh())})};return oe(f,s=>{s===!0?F.push({hash:"#/form"}):F.push({hash:""})}),(s,i)=>{const c=ne,h=le,u=re;return o(),d("div",Oe,[m(f)?(o(),B(c,{key:0,id:"modal-form-jabatan",modalClass:"bottom-",hideHeader:!0,hideFooter:!0,size:"lg","dialog-class":"modal-dialog-centered align-items-end-",modelValue:m(f),"onUpdate:modelValue":i[0]||(i[0]=r=>ie(f)?f.value=r:null),"body-class":"p-4",class:"mb-4"},{default:n(()=>[l(qe,{hideHeader:!m(f),showForm:m(f),cancel:m(G),form:m(g),handleSubmit:R,v$:m(E)},null,8,["hideHeader","showForm","cancel","form","v$"])]),_:1},8,["modelValue"])):v("",!0),l(h,{vshow:"!showForm","body-class":"p-0"},{header:n(()=>[t("div",Me,[t("div",Xe,[m(f)?v("",!0):(o(),B(m(q),{key:0,class:"bg-gradient-primary btn-sm mb-0 px-3",onClick:m(pe)},{default:n(()=>[y(" +  New ")]),_:1},8,["onClick"]))]),Ae])]),default:n(()=>[l(m(de),{id:"table",ref_key:"table",ref:p,"table-class":"text-xs w-100",align:"middle",provider:I,items:x.value,fields:k,small:!0,responsive:!1,hover:!0,stacked:"md"},{"cell(action)":n(({item:r})=>[t("div",Ke,[D((o(),d("a",{class:"badge badge-sm bg-gradient-danger text-xs mx-2",href:"javascript:;",title:"Delete","item-id":`${r.id}`,onClick:V=>e(r)},Ye,8,Qe)),[[u,void 0,void 0,{hover:!0,top:!0}]]),D((o(),d("a",{href:"javascript:;",class:"badge badge-sm bg-gradient-warning text-xs mx-2",title:"Edit","item-id":`${r.id}`,onClick:V=>m(P)(r)},tt,8,Ze)),[[u,void 0,void 0,{hover:!0,top:!0}]])])]),"cell(name)":n(({item:r})=>[t("div",st,[t("div",at,[t("h6",ot,b(r.name),1),t("p",it,[t("i",null,b(r.summary_tasks),1)])]),r.job_descs_count?(o(),d("span",{key:0,class:"badge badge-xs bg-gradient-info text-xxs mx-2 ms-auto cursor-pointer",onClick:V=>m(P)(r)},b(r.job_descs_count)+" : tugas ",9,nt)):v("",!0)])]),_:1},8,["items"])]),_:1})])}}});export{rt as default};
