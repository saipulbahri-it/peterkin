import{d as X,G as Y,i as Z,r as w,O as ss,a as ts,o as d,I,j as i,e as s,b as u,p as l,g as k,h as n,f as P,F as N,l as O,t as m,a3 as U,J as x,a0 as as,a1 as es,a4 as os,a5 as ns,a6 as is,a7 as ls,M as ds,n as cs,a8 as us,a9 as rs,S as _s,aa as ps}from"./index_549e0684.js";const ms=s("h3",{class:"mb-4 text-white"},"Tugas hari ini",-1),bs={class:"row my-4"},hs={class:"col-12 gap-3 d-flex"},gs=s("i",{class:"fas fa-plus","aria-hidden":"true"},null,-1),ks=s("i",{class:"fas fa-plus","aria-hidden":"true"},null,-1),vs={class:"col-12"},fs={class:"float-end",style:{position:"absolute",right:"10px",top:"-20px"}},xs={class:"pt-3"},ys={key:0,class:"text-xs list-group list-group-numbered"},ws={"data-v-1986abaa":"",class:"list-group-item d-flex align-items-start py-2 pe-2"},Cs={"data-v-1986abaa":"",class:"ms-2 w-100 d-flex"},Ts={"data-v-1986abaa":"",class:"fw-bold"},js={key:1,class:"alert alert-warning text-white"},Bs={key:2},Vs={key:1,class:"card mb-4"},Ds={class:"card-body p-3"},$s={class:"float-end",style:{position:"absolute",right:"10px",top:"-20px"}},Fs={class:"d-flex"},Ls={class:"card"},Ss={class:"card-body p-3"},Is={class:"list-group list-group-flush list-group-numbered-","data-toggle":"checklist"},Ps={class:"list-group-item border-0 flex-column align-items-start ps-0 py-0 mb-3"},Ns={class:"checklist-item checklist-item-warning ps-0 ms-0"},Os={class:"d-flex align-items-center"},Us={class:"mb-0 text-dark font-weight-bold text-sm"},Gs=s("i",{class:"fa fs-6 fa-ellipsis-v",title:"...","aria-hidden":"true"},".",-1),zs=s("i",{class:"fa fa-edit me-1"},null,-1),As=s("i",{class:"fa fa-trash me-1"},null,-1),Js={class:"text-xxs ps-4 mb-1"},Rs={class:"d-flex justify-content-between align-items-center ms-4 mt-0"},Es=s("span",{class:"text-xs me-1 text-secondary font-weight-bold"},"Sumber : ",-1),Ms={class:"text-xs font-weight-bolder"},Hs={class:"ms-auto text-end"},Qs=s("span",{class:"text-xs text-secondary font-weight-bold me-1"}," Status : ",-1),qs=s("hr",{class:"horizontal dark mt-4 mb-0"},null,-1),Ks={key:0,class:"list-group-item border-0 flex-column align-items-start ps-0 py-0 mb-3"},Ws=s("strong",null,"Tupoksi",-1),Xs=s("br",null,null,-1),at=X({__name:"ListTugas",setup(Ys){var L;const p=(L=Y(Z("user")))==null?void 0:L.value,r=w(!1),b=w(!1),C=w([]),T=w([]),v=async()=>{const{status:o,data:t}=await U.apiClient.get("/api/task").then(({status:c,data:g})=>({status:c,data:g}));C.value=t.data},G=async o=>{const{status:t,summary_tasks:c,job_descs:g}=await U.apiClient.get(`/api/position/${o}`).then(({status:V,data:f})=>{let D=f.job_descs,$=f.summary_tasks;return{status:V,summary_tasks:$,job_descs:D}});T.value=g};ss(()=>{v()});const _={id:void 0,job_desc_id:void 0,title:"",description:"",task_source:""},a=ts({..._}),z=()=>{r.value=!0,b.value=!r.value,_.job_desc_id=void 0,_.description="",Object.assign(a,{},_)},A=()=>{r.value=!1,b.value=!r.value,p!=null&&p.position_id&&G(p==null?void 0:p.position_id)},J=o=>{b.value=!(r.value=!0),_.job_desc_id=o.id,_.description=o.title,_.task_source="Tupoksi",Object.assign(a,{},_)},R=()=>{b.value=!1},j=()=>{Object.assign(a,{},_),r.value=!1},E=()=>{a!=null&&a.id?x.put(`/api/task/${a.id}`,a).then(({status:o,data:t})=>{j(),v()}):x.post("/api/task",a).then(({status:o,data:t})=>{j(),v()})},M=o=>{x.get(`/api/task/${o.id}`).then(({status:t,data:c})=>{Object.assign(a,c),r.value=!0,b.value=!1})},B=(o,t)=>{x.post(`/api/task/${o.id}/setStatus`,{task_status:t}).then(({status:c,data:g})=>{v()})},H=o=>{x.delete(`/api/task/${o.id}`).then(({status:t,data:c})=>{v()})},Q=o=>{let t;switch(o){case"Done":t="bg-gradient-success";break;case"In-Progress":t="bg-gradient-warning";break;case"To-Do":t="bg-gradient-secondary";break;default:t="bg-gradient-dark";break}return t};return(o,t)=>{const c=as,g=es,V=os,f=ns,D=is,$=ls,F=us,q=rs,S=_s,K=ps,W=ds;return d(),I(W,{fluid:""},{default:i(()=>[ms,s("div",bs,[s("div",hs,[b.value?k("",!0):(d(),u("a",{key:0,class:"btn bg-gradient-info mb-4 mr-auto d-flex align-items-center",href:"javascript:;",onClick:A},[gs,l("  Daftar Tupoksi ")])),r.value?k("",!0):(d(),u("a",{key:1,class:"btn bg-gradient-dark mb-4 ms-auto",href:"javascript:;",onClick:z},[ks,l("   Tugas Baru ")]))]),s("div",vs,[b.value?(d(),I(g,{key:0,class:"mb-4"},{default:i(()=>{var e,y;return[s("span",fs,[n(c,{variant:"dark",onClick:R},{default:i(()=>[l("x")]),_:1})]),s("div",xs,[(e=P(p))!=null&&e.position_id?(d(),u("ol",ys,[(d(!0),u(N,null,O(T.value,(h,Zs)=>(d(),u("li",ws,[s("div",Cs,[s("div",Ts,m(h.title),1),n(c,{variant:"info",size:"sm",class:"btn badge-sm bg-gradient-info ms-auto d-flex align-self-center",onClick:st=>J(h)},{default:i(()=>[l(" Pilih ")]),_:2},1032,["onClick"])])]))),256))])):(d(),u("div",js," Tupoksi tidak tersedia karena user ini belum ditentukan jabatan ")),T.value.length===0?(d(),u("div",Bs,[l(" Tupoksi tidak tersedia pada jabatan "),s("strong",null,m((y=P(p))==null?void 0:y.position),1)])):k("",!0)])]}),_:1})):k("",!0),r.value?(d(),u("div",Vs,[s("div",Ds,[s("span",$s,[n(c,{variant:"info",onClick:j},{default:i(()=>[l("x")]),_:1})]),n(f,{label:"Judul:","label-class":"mb-0 pb-0",class:"mb-2"},{default:i(()=>[n(V,{modelValue:a.title,"onUpdate:modelValue":t[0]||(t[0]=e=>a.title=e)},null,8,["modelValue"])]),_:1}),n(f,{label:"Rincian Tugas:","label-class":"mb-0 pb-0",class:"mb-3"},{default:i(()=>[n(D,{modelValue:a.description,"onUpdate:modelValue":t[1]||(t[1]=e=>a.description=e),disabled:!!a.job_desc_id},null,8,["modelValue","disabled"])]),_:1}),s("div",Fs,[n($,{modelValue:a.task_source,"onUpdate:modelValue":t[2]||(t[2]=e=>a.task_source=e),options:[{value:"Tupoksi",text:"Tupoksi"},{value:"Atasan",text:"Perintah Atasan"},{value:"Lainnya",text:"Lainnya"}]},null,8,["modelValue"]),n(c,{variant:"primary",class:"ms-auto",onClick:E},{default:i(()=>[l(m(a!=null&&a.id?"Update":"Create"),1)]),_:1})])])])):k("",!0),s("div",Ls,[s("div",Ss,[s("ul",Is,[(d(!0),u(N,null,O(C.value,(e,y)=>(d(),u("li",Ps,[s("div",Ns,[s("div",Os,[s("h6",Us,m(y+1)+". "+m(e.title),1),n(K,{"no-caret":!0,"menu-class":"dropdown-menu-end px-2 py-2 top-4 me-sm-n4 me-n4","toggle-class":"px-1 btn-xs",variant:"link",class:"dropdown float-lg-end ms-auto pe-1"},{"button-content":i(()=>[Gs]),default:i(()=>[n(F,{variant:"secondary",onClick:h=>B(e,"To-Do")},{default:i(()=>[l(" To-Do")]),_:2},1032,["onClick"]),n(F,{variant:"warning",onClick:h=>B(e,"In-Progress")},{default:i(()=>[l(" In-Progress")]),_:2},1032,["onClick"]),n(F,{variant:"success",onClick:h=>B(e,"Done")},{default:i(()=>[l(" Done ")]),_:2},1032,["onClick"]),n(q),n(S,{class:"border-radius-md text-warning",onClick:h=>M(e)},{default:i(()=>[zs,l("Edit ")]),_:2},1032,["onClick"]),n(S,{variant:"danger",class:"border-radius-md",onClick:h=>H(e)},{default:i(()=>[As,l(" Hapus ")]),_:2},1032,["onClick"])]),_:2},1024)]),s("p",Js,m(e.description),1),s("div",Rs,[s("div",null,[Es,s("span",Ms,m(e.task_source),1)]),s("div",Hs,[Qs,s("span",{class:cs(["badge badge-sm text-xxs",Q(e.task_status)])},m(e.task_status),3)])])]),qs]))),256)),C.value.length===0?(d(),u("li",Ks,[l(" Tugas hari ini tidak tersedia. silahkan buat tugas harian anda dengan memilih daftar "),Ws,l(" : atau "),Xs,l(" tambah tugas baru jika tugas anda tidak ada dalam Tupoksi jabatan anda. ")])):k("",!0)])])])])])]),_:1})}}});export{at as default};
