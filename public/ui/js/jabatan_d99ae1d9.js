import{r as R,a as W,ah as A,ai as Y,aj as Z,ak as ee,d as M,o,b as c,e,I as T,j as l,p as w,g as y,t as x,f as n,h as m,F as H,l as P,q as te,a1 as X,a4 as se,al as ae,a5 as oe,a6 as ne,_ as ie,k as I,v as L,n as le,x as re,y as de,am as ce,a3 as V,z as me,c as ue,ab as fe,ad as G,ac as _e,T as pe,an as he,N as ve,L as be,ag as $e}from"./index_85e5a85c.js";import{r as S,m as O,c as ge,u as ye}from"./index_74a6bf53.js";const xe={form:{name:{required:S,min:O(8)},summary_tasks:{required:S},job_descs:{required:S,minLength:O(2),$each:ge.forEach({title:{required:S}})}}},K=R([{title:""},{title:""}]),E={id:"",name:"",description:"",summary_tasks:"-",job_descs:K.value},b=R(!1),_=W({...E}),z=ye(xe,{form:_},{$lazy:!1}),Q=async p=>{Object.assign(_,p)},ke=async()=>{K.value=[{title:""},{title:""},{title:""}],z.value.$reset(),Object.assign(_,E)},q=async p=>{await Q(p),b.value=!0};async function we(){await Q(E),b.value=!0}async function U(){await ke(),b.value=!1}function Ce(p){const d=r=>Array.isArray(r)?r.map($=>d($)):A(r)||Y(r)||Z(r)?d(ee(r)):r&&typeof r=="object"?Object.keys(r).reduce(($,C)=>($[C]=d(r[C]),$),{}):r;return d(p)}const N=p=>(re("data-v-c88ce3fb"),p=p(),de(),p),je={class:"form-position-component-wrap"},Fe={key:0,class:"form-header align-items-center sticky-top bg-white py-2 mb-3 sticky-header"},Ve={class:"float-end ms-auto top-2 right-5"},Be={class:"form-title mb-0"},Se={class:"form-description text-xs"},Re={class:"form-body"},Te=N(()=>e("hr",null,null,-1)),Ie={class:"d-flex align-items-center"},Ee={key:0,class:"mb-5 row"},Je={class:"text-xs list-group list-group-flush list-group-numbered px-0"},Ue={key:0,class:"ms-2 w-100 d-flex gap-2"},ze=["onUpdate:modelValue"],Ne={class:"actions text-sm ms-auto cursor-pointer d-flex flex-column justify-content-between"},De=["onClick"],He=N(()=>e("i",{class:"fas fa-save text-primary"},null,-1)),Pe={class:"jobdesc-title"},Le={class:"actions text-sm ms-auto cursor-pointer d-flex justify-content-between ps-2"},Ge=["onClick"],Oe=["onClick"],qe={class:"list-group-item unnumbered d-flex align-items-start py-2 pe-2"},Ae={class:"ms-2 w-100 d-flex gap-2"},Me=N(()=>e("div",{class:"fw-200 font-italic"},"tambah rincian tugas",-1)),Xe={class:"actions text-sm ms-auto cursor-pointer d-flex align-items-end ps-2"},Ke={key:1,class:"text-xs list-group list-group-numbered mb-5"},Qe={class:"list-group-item d-flex justify-content-between align-items-center"},We=["onUpdate:modelValue","placeholder"],Ye=["onClick"],Ze={class:"d-flex mt-2 sticky-bottom bottom-4"},et=M({__name:"FormPosition",props:{showForm:{type:[String,Boolean],default:!0},hideHeader:{type:[String,Boolean],default:!1},cancel:{},form:{},handleSubmit:{},v$:{}},setup(p){const d=p;Ce(d.form);const r=(t=!1)=>{t?d.v$.form.job_descs.$model.push({title:"",_inline:!0}):d.v$.form.job_descs.$model.push({title:""});let s=document.getElementById("modal-form-jabatan");s==null||s.scrollBy(0,100)},$=async t=>{var s=d.v$.form.job_descs.$model.at(t);s!=null&&s.id?J(s.id).then(({status:i,data:u})=>{i===200&&d.v$.form.job_descs.$model.splice(t,1)}):ce(()=>{d.v$.form.job_descs.$model.splice(t,1)})},C=t=>{t._inline=!0},B=async(t,s)=>{s._inline=!1,s!=null&&s.id||$(t)},J=async t=>{const{status:s,data:i}=await V.apiClient.delete(`/api/jobdesc/${t}`).then(({status:u,data:h})=>({status:u,data:h}));return{status:s,data:i}};return(t,s)=>{var F,D;const i=X,u=se,h=ae,v=oe,g=ne,f=ie;return o(),c("div",je,[d.hideHeader?y("",!0):(o(),c("div",Fe,[e("span",Ve,[t.showForm?(o(),T(i,{key:0,variant:"outline-info",size:"sm",class:"mb-0 px-3",onClick:t.cancel},{default:l(()=>[w(" x ")]),_:1},8,["onClick"])):y("",!0)]),e("h5",Be,x((F=n(_))!=null&&F.id?"Edit Jabatan":" Jabatan Baru"),1),e("div",Se,"Form "+x((D=n(_))!=null&&D.id?"Edit ":" Tambah")+" Jabatan",1)])),e("div",Re,[m(f,{id:"form-postion-component",floating:!0,onSubmit:te(t.handleSubmit,["prevent"])},{default:l(()=>[m(v,{id:"fieldset-1",label:"Nama Jabatan","label-for":"input-floating-1","label-class":"ps-2",state:t.v$.form.name.$dirty?!t.v$.form.name.$invalid:void 0,floating:"",class:"mb-3"},{default:l(()=>[m(u,{id:"input-floating-1",modelValue:t.v$.form.name.$model,"onUpdate:modelValue":s[0]||(s[0]=a=>t.v$.form.name.$model=a),state:t.v$.form.name.$dirty?!t.v$.form.name.$invalid:void 0,placeholder:"Enter name please",trim:""},null,8,["modelValue","state"]),m(h,{class:"text-xxs"},{default:l(()=>{var a;return[w(x((a=t.v$.form.name.$errors[0])==null?void 0:a.$message),1)]}),_:1})]),_:1},8,["state"]),m(v,{id:"fieldset-2",label:"Ringkasan Tugas","label-for":"textarea","label-class":"ps-2",state:t.v$.form.summary_tasks.$dirty?!t.v$.form.summary_tasks.$invalid:void 0,class:"mb-3",floating:""},{default:l(()=>[m(g,{id:"textarea",modelValue:t.v$.form.summary_tasks.$model,"onUpdate:modelValue":s[1]||(s[1]=a=>t.v$.form.summary_tasks.$model=a),state:t.v$.form.summary_tasks.$dirty?!t.v$.form.summary_tasks.$invalid:void 0,placeholder:"Ringkasan Tugas",rows:"4","max-rows":"4"},null,8,["modelValue","state"]),m(h,{class:"text-xxs"},{default:l(()=>{var a;return[w(x((a=t.v$.form.summary_tasks.$errors[0])==null?void 0:a.$message),1)]}),_:1})]),_:1},8,["state"]),Te,e("h6",Ie,[w(" Rincian Tugas : "),n(_).id?y("",!0):(o(),c("a",{key:0,href:"javascript:;",class:"badge bagde-info bg-gradient-info text-xxs text-end float-end top-2 ms-auto",onClick:r}," +  "))]),n(_).id?(o(),c("div",Ee,[e("ol",Je,[(o(!0),c(H,null,P(t.v$.form.job_descs.$model,(a,j)=>(o(),c("li",{class:"list-group-item d-flex align-items-start py-2 pe-2",key:j},[a._inline?(o(),c("div",Ue,[m(v,{class:"d-block w-100"},{default:l(()=>[I(e("textarea",{"onUpdate:modelValue":k=>a.title=k,class:"w-100 form-control"},null,8,ze),[[L,a.title]])]),_:2},1024),e("div",Ne,[e("i",{class:"fas fa-times text-secondary",onClick:k=>B(j,a)},null,8,De),He])])):(o(),c("div",{key:1,class:le(["ms-2 w-100 d-flex gap-2",{"font-italic text-primary":!a.id}])},[e("div",Pe,x(a.title),1),e("div",Le,[e("i",{class:"fas fa-trash text-danger px-2",onClick:k=>$(j)},null,8,Ge),e("i",{class:"fas fa-pencil-alt text-warning ps-1",onClick:k=>C(a)},null,8,Oe)])],2))]))),128)),e("li",qe,[e("div",Ae,[m(v,{class:"d-block w-100"},{default:l(()=>[Me]),_:1}),e("div",Xe,[e("i",{class:"fas fa-plus text-primary ps-1",onClick:s[2]||(s[2]=a=>r(!0))})])])])])])):(o(),c("ol",Ke,[(o(!0),c(H,null,P(t.v$.form.job_descs.$model,(a,j)=>(o(),c("li",Qe,[m(v,{id:"fieldset-{i}","label-class":"ps-2",state:!0,class:"w-100 ms-3"},{default:l(()=>[I(e("input",{class:"form-control","onUpdate:modelValue":k=>a.title=k,placeholder:`${j+1}. tulis rincian tugas pada jabatan ini.`,rows:"1","max-rows":"3"},null,8,We),[[L,a.title]])]),_:2},1024),n(_).job_descs.length>1?(o(),c("a",{key:0,href:"javascript:;",class:"fw-bold text-danger text-xxs text-end float-end top-2 ms-auto ps-3",onClick:k=>$(j)}," X  ",8,Ye)):y("",!0)]))),256))])),e("div",Ze,[n(_).id?y("",!0):(o(),T(i,{key:0,variant:"secondary",size:"sm",onClick:r},{default:l(()=>[w(" + Row ")]),_:1})),m(i,{type:"submit",variant:"info",size:"sm",class:"btn-gradient-info ms-auto",disabled:t.v$.form.$invalid},{default:l(()=>[w(" Submit ")]),_:1},8,["disabled"])])]),_:1},8,["onSubmit"])])])}}});const tt=me(et,[["__scopeId","data-v-c88ce3fb"]]),st={class:"mx-sm-4 mx-1"},at={class:"card-header-wrap"},ot={class:"ms-auto my-auto d-flex gap-3 mt-lg-0 align-items-center float-end"},nt=e("div",null,[e("h5",{class:"mb-0"},"Jabatan & Tupoksi"),e("p",{class:"text-xs mb-0"},"daftar list jabatan")],-1),it={class:"text-sm-center text-end float-none float-sm-none pe-2 text-nowrap"},lt=["item-id","onClick"],rt=e("i",{class:"fas fa-trash","aria-hidden":"true"},null,-1),dt=[rt],ct=["item-id","onClick"],mt=e("i",{class:"fas fa-user-edit","aria-hidden":"true"},null,-1),ut=[mt],ft={class:"d-flex px-2 py-1 gap-3 ps-3 align-items-center"},_t={class:"d-flex flex-column justify-content-center"},pt={class:"mb-0 text-primary text-sm"},ht={class:"text-xs text-secondary mb-0"},vt=["onClick"],gt=M({__name:"jabatan",setup(p){ue(()=>E);const d=R(null),r=R([]),$=[{key:"name",label:"Jabatan",class:"align-middle"},{key:"action",class:"align-middle text-center",thStyle:{width:"115px"}}],C=async function(){try{const{data:i}=await V.apiClient.get("/api/position");return i.data}catch{return[]}},B=fe(),J=async()=>{var h;if(await z.value.$validate()){var u;if(_.id){const{status:v,data:g}=await V.apiClient.put(`/api/position/${_.id}`,_);u={status:v,data:g}}else{const{status:v,data:g}=await V.apiClient.post("/api/position",_);u={status:v,data:g}}(u.status===200||u.status===201)&&(U(),(h=d.value)==null||h.refresh())}},t=i=>{confirm("delete confirm")&&V.apiClient.delete(`/api/position/${i.id}`).then(({status:u})=>{var h;u===200&&((h=d.value)==null||h.refresh())})};G(b,i=>{i===!0?B.push({hash:"#/form"}):B.push({hash:""})});const s=_e();return G(()=>s.hash,async i=>{i||U()}),(i,u)=>{const h=he,v=ve,g=$e;return o(),c("div",st,[n(b)?(o(),T(h,{key:0,id:"modal-form-jabatan",modalClass:"bottom-",hideHeader:!0,hideFooter:!0,size:"lg","dialog-class":"modal-dialog-centered align-items-end-",modelValue:n(b),"onUpdate:modelValue":u[0]||(u[0]=f=>A(b)?b.value=f:null),"body-class":"p-sm-4",class:"mb-4"},{default:l(()=>[m(tt,{hideHeader:!n(b),showForm:n(b),cancel:n(U),form:n(_),handleSubmit:J,v$:n(z)},null,8,["hideHeader","showForm","cancel","form","v$"])]),_:1},8,["modelValue"])):y("",!0),m(v,{vshow:"!showForm","body-class":"p-0"},{header:l(()=>[e("div",at,[e("div",ot,[m(pe,{name:"fade",mode:"out-in"},{default:l(()=>[n(b)?y("",!0):(o(),T(n(X),{key:0,class:"bg-gradient-primary btn-sm mb-0 px-3",onClick:n(we)},{default:l(()=>[w(" +  New ")]),_:1},8,["onClick"]))]),_:1})]),nt])]),default:l(()=>[m(n(be),{id:"table",ref_key:"table",ref:d,"table-class":"text-xs w-100",align:"middle",provider:C,items:r.value,fields:$,small:!0,responsive:!1,hover:!0,stacked:"md"},{"cell(action)":l(({item:f})=>[e("div",it,[I((o(),c("a",{class:"badge badge-sm bg-gradient-danger text-xs mx-2",href:"javascript:;",title:"Delete","item-id":`${f.id}`,onClick:F=>t(f)},dt,8,lt)),[[g,void 0,void 0,{hover:!0,top:!0}]]),I((o(),c("a",{href:"javascript:;",class:"badge badge-sm bg-gradient-warning text-xs mx-2",title:"Edit","item-id":`${f.id}`,onClick:F=>n(q)(f)},ut,8,ct)),[[g,void 0,void 0,{hover:!0,top:!0}]])])]),"cell(name)":l(({item:f})=>[e("div",ft,[e("div",_t,[e("h6",pt,x(f.name),1),e("p",ht,[e("i",null,x(f.summary_tasks),1)])]),f.job_descs_count?(o(),c("span",{key:0,class:"badge badge-xs bg-gradient-info text-xxs mx-2 ms-auto cursor-pointer",onClick:F=>n(q)(f)},x(f.job_descs_count)+" : tugas ",9,vt)):y("",!0)])]),_:1},8,["items"])]),_:1})])}}});export{gt as default};
