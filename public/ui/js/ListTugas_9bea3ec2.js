import{d as q,a2 as Q,i as W,r as w,N as X,a as Y,o as a,G as L,j as e,e as t,b as l,p as o,g as h,h as n,f as N,F as S,l as O,t as b,a3 as U,H as j,$ as Z,a0 as tt,a4 as st,a5 as at,a6 as et,K as ot,a7 as nt,a8 as it,R as lt,a9 as dt}from"./index_9cf6e5a4.js";const ct=t("h3",{class:"mb-4 text-white"},"Tugas hari ini",-1),ut={class:"row my-4"},rt={class:"col-12 gap-3 d-flex"},_t=t("i",{class:"fas fa-plus","aria-hidden":"true"},null,-1),pt=t("i",{class:"fas fa-plus","aria-hidden":"true"},null,-1),mt={class:"col-12"},bt={class:"float-end",style:{position:"absolute",right:"10px",top:"-20px"}},ht={class:"pt-3"},gt={key:0,class:"text-xs list-group list-group-numbered"},ft={"data-v-1986abaa":"",class:"list-group-item d-flex align-items-start py-2 pe-2"},vt={"data-v-1986abaa":"",class:"ms-2 w-100 d-flex"},kt={"data-v-1986abaa":"",class:"fw-bold"},xt={key:1,class:"alert alert-warning text-white"},yt={key:2},wt={key:1,class:"card mb-4"},jt={class:"card-body p-3"},Tt={class:"float-end",style:{position:"absolute",right:"10px",top:"-20px"}},Ct={class:"d-flex"},Bt={class:"card"},Vt={class:"card-body p-3"},Ft={class:"list-group list-group-flush list-group-numbered-","data-toggle":"checklist"},$t={class:"list-group-item border-0 flex-column align-items-start ps-0 py-0 mb-3"},Dt={class:"checklist-item checklist-item-warning ps-0 ms-0"},Lt={class:"d-flex align-items-center"},Nt={class:"mb-0 text-dark font-weight-bold text-sm"},St=t("i",{class:"fa fs-6 fa-ellipsis-v",title:"...","aria-hidden":"true"},null,-1),Ot=t("i",{class:"fa fa-edit me-1"},null,-1),Ut=t("i",{class:"fa fa-trash me-1"},null,-1),Gt={class:"text-xxs ps-4 mb-1"},It={class:"d-flex justify-content-between align-items-center ms-4 mt-0"},Pt=t("span",{class:"text-xs me-1 text-secondary font-weight-bold"},"Sumber : ",-1),Rt={key:0,class:"text-xs font-weight-bolder text-primary"},zt={key:1,class:"text-xs font-weight-bolder"},Et={class:"ms-auto text-end"},Ht=t("span",{class:"text-xs text-secondary font-weight-bold me-1"}," Status : ",-1),Jt={class:"badge badge-sm bg-gradient-warning text-xxs"},At=t("hr",{class:"horizontal dark mt-4 mb-0"},null,-1),Kt={key:0,class:"list-group-item border-0 flex-column align-items-start ps-0 py-0 mb-3"},Mt=t("strong",null,"Tupoksi",-1),qt=t("br",null,null,-1),Zt=q({__name:"ListTugas",setup(Qt){var $;const _=($=Q(W("user")))==null?void 0:$.value,r=w(!1),p=w(!1),T=w([]),C=w([]),k=async()=>{const{status:d,data:c}=await U.apiClient.get("/api/task").then(({status:u,data:g})=>({status:u,data:g}));T.value=c.data},G=async d=>{const{status:c,summary_tasks:u,job_descs:g}=await U.apiClient.get(`/api/position/${d}`).then(({status:V,data:f})=>{let F=f.job_descs,v=f.summary_tasks;return{status:V,summary_tasks:v,job_descs:F}});C.value=g};X(()=>{k()});const m={id:void 0,title:"",description:""},s=Y({...m}),I=()=>{r.value=!0,p.value=!r.value,m.job_desc_id=void 0,Object.assign(s,{},m)},P=()=>{r.value=!1,p.value=!r.value,_!=null&&_.position_id&&G(_==null?void 0:_.position_id)},R=d=>{p.value=!(r.value=!0),m.job_desc_id=d.id,m.description=d.title,Object.assign(s,{},m)},z=()=>{p.value=!1},B=()=>{Object.assign(s,{},m),r.value=!1},E=()=>{s!=null&&s.id?j.put(`/api/task/${s.id}`,s).then(({status:d,data:c})=>{B(),k()}):j.post("/api/task",s).then(({status:d,data:c})=>{B(),k()})},H=d=>{j.get(`/api/task/${d.id}`).then(({status:c,data:u})=>{Object.assign(s,u),r.value=!0,p.value=!1})},J=d=>{j.delete(`/api/task/${d.id}`).then(({status:c,data:u})=>{k()})};return(d,c)=>{const u=Z,g=tt,V=st,f=at,F=et,v=nt,A=it,D=lt,K=dt,M=ot;return a(),L(M,{fluid:""},{default:e(()=>[ct,t("div",ut,[t("div",rt,[p.value?h("",!0):(a(),l("a",{key:0,class:"btn bg-gradient-info mb-4 mr-auto d-flex align-items-center",href:"javascript:;",onClick:P},[_t,o("  Daftar Tupoksi ")])),r.value?h("",!0):(a(),l("a",{key:1,class:"btn bg-gradient-dark mb-4 ms-auto",href:"javascript:;",onClick:I},[pt,o("   Tugas Baru ")]))]),t("div",mt,[p.value?(a(),L(g,{key:0,class:"mb-4"},{default:e(()=>{var i,x;return[t("span",bt,[n(u,{variant:"dark",onClick:z},{default:e(()=>[o("x")]),_:1})]),t("div",ht,[(i=N(_))!=null&&i.position_id?(a(),l("ol",gt,[(a(!0),l(S,null,O(C.value,(y,Wt)=>(a(),l("li",ft,[t("div",vt,[t("div",kt,b(y.title),1),n(u,{variant:"info",size:"sm",class:"btn badge-sm bg-gradient-info ms-auto d-flex align-self-center",onClick:Xt=>R(y)},{default:e(()=>[o(" Pilih ")]),_:2},1032,["onClick"])])]))),256))])):(a(),l("div",xt," Tupoksi tidak tersedia karena user ini belum ditentukan jabatan ")),C.value.length===0?(a(),l("div",yt,[o(" Tupoksi tidak tersedia pada jabatan "),t("strong",null,b((x=N(_))==null?void 0:x.position),1)])):h("",!0)])]}),_:1})):h("",!0),r.value?(a(),l("div",wt,[t("div",jt,[t("span",Tt,[n(u,{variant:"info",onClick:B},{default:e(()=>[o("x")]),_:1})]),n(f,{label:"Judul:","label-class":"mb-0 pb-0",class:"mb-2"},{default:e(()=>[n(V,{modelValue:s.title,"onUpdate:modelValue":c[0]||(c[0]=i=>s.title=i)},null,8,["modelValue"])]),_:1}),n(f,{label:"Rincian Tugas:","label-class":"mb-0 pb-0",class:"mb-3"},{default:e(()=>[n(F,{modelValue:s.description,"onUpdate:modelValue":c[1]||(c[1]=i=>s.description=i),disabled:!!s.job_desc_id},null,8,["modelValue","disabled"])]),_:1}),t("div",Ct,[n(u,{variant:"primary",class:"ms-auto",onClick:E},{default:e(()=>[o(b(s!=null&&s.id?"Update":"Create"),1)]),_:1})])])])):h("",!0),t("div",Bt,[t("div",Vt,[t("ul",Ft,[(a(!0),l(S,null,O(T.value,(i,x)=>(a(),l("li",$t,[t("div",Dt,[t("div",Lt,[t("h6",Nt,b(x+1)+". "+b(i.title),1),n(K,{"no-caret":!0,"menu-class":"dropdown-menu-end px-2 py-2 top-4 me-sm-n4 me-n4","toggle-class":"px-1 btn-xs",variant:"link",class:"dropdown float-lg-end ms-auto pe-1"},{"button-content":e(()=>[St]),default:e(()=>[n(v,{variant:"secondary"},{default:e(()=>[o(" To-Do")]),_:1}),n(v,{variant:"warning"},{default:e(()=>[o(" In-Progress")]),_:1}),n(v,{variant:"success"},{default:e(()=>[o(" Done ")]),_:1}),n(A),n(D,{class:"border-radius-md text-warning",onClick:y=>H(i)},{default:e(()=>[Ot,o("Edit ")]),_:2},1032,["onClick"]),n(D,{variant:"danger",class:"border-radius-md",onClick:y=>J(i)},{default:e(()=>[Ut,o(" Hapus ")]),_:2},1032,["onClick"])]),_:2},1024)]),t("p",Gt,b(i.description),1),t("div",It,[t("div",null,[Pt,i.job_desc_id?(a(),l("span",Rt," Tupoksi ")):(a(),l("span",zt,"Lainnya"))]),t("div",Et,[Ht,t("span",Jt,b(i.task_status),1)])])]),At]))),256)),T.value.length===0?(a(),l("li",Kt,[o(" Tugas hari ini tidak tersedia. silahkan buat tugas harian anda dengan memilih daftar "),Mt,o(" : atau "),qt,o(" tambah tugas baru jika tugas anda tidak ada dalam Tupoksi jabatan anda. ")])):h("",!0)])])])])])]),_:1})}}});export{Zt as default};
