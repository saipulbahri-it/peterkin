import{J as le,d as ie,r,P as ce,a as de,ab as re,ac as ue,ad as L,o as b,I as V,j as s,k as N,ae as pe,e as n,h as o,p as h,t as c,b as $,a3 as _e,a1 as me,a4 as fe,a5 as ve,W as R,a0 as J,X as A,_ as be,N as ge,K as he,L as xe,af as ye,M as we,x as Ve,y as ke,ag as Ce,z as Be}from"./index_85e5a85c.js";const x=le.create({baseURL:"",headers:{"X-Requested-With":"XMLHttpRequest"},withCredentials:!0}),G=g=>(Ve("data-v-5bfea29b"),g=g(),ke(),g),Ue={class:"float-end",style:{position:"absolute",right:"20px",top:"-20px"}},Pe={class:"d-flex"},Se=G(()=>n("div",{class:"d-lg-flex"},[n("div",null,[n("h5",{class:"mb-0"},"Pengguna/Pegawai"),n("p",{class:"text-sm mb-0"},"daftar pegawai")]),n("div",{class:"ms-auto my-auto d-flex gap-3 mt-lg-0 mt-4 align-items-center d-none"},[n("a",{href:"#",class:"btn bg-gradient-primary btn-sm mb-0"}," +Â  New ")])],-1)),Ie={class:"text-sm-center text-end float-none float-sm-none"},Fe=["item-id","onClick"],Le=G(()=>n("i",{class:"fas fa-user-edit","aria-hidden":"true"},null,-1)),Ne=[Le],$e={class:"d-flex px-2 py-1 gap-2"},Re={class:"d-flex flex-column justify-content-center"},Je={class:"mb-0 text-primary"},Ae={class:"text-xs text-secondary mb-0"},Ge={class:"d-flex px-2 py-1 gap-2"},Ke={class:"d-flex flex-column justify-content-center"},Me={class:"mb-0 text-xs"},Te={class:"text-xs text-secondary mb-0"},Xe={class:"d-flex px-2 py-1 gap-2"},qe={class:"d-flex flex-column justify-content-center"},De={class:"mb-0 text-xs"},Ee={key:0,class:"text-xs text-secondary mb-0"},Oe=["title"],We={class:"sticky-footer"},je=ie({__name:"ListView",setup(g){const K=[{key:"name",class:"align-middle",thStyle:{width:"350px"}},{key:"account",label:"username & email",class:"align-middle",thStyle:{width:"250px"}},{key:"unit",label:"Unit Keja & Jabatan",class:"align-middle"},{key:"action",class:"align-middle text-center",thStyle:{width:"115px"}}],m=r(10),i=r({page:1,per_page:m.value,current_page:1,from:0,to:0,total:0}),k=r([]),C=r([]),B=r([]),M=e=>({id:e==null?void 0:e.id,name:e==null?void 0:e.name}),f=r(),T=e=>{var t;m.value=e,(t=f.value)==null||t.refresh()},X=e=>{var t;i.value.current_page=e,(t=f.value)==null||t.refresh()},q=e=>{if(!e)return;const t=e.trim().split(" ");return t.reduce((p,_,v)=>((v===0||v===t.length-1)&&(p=`${p}${_.charAt(0).toUpperCase()}`),p),"")},D=async e=>{const t={page:e.currentPage,per_page:m.value},{data:d}=await x.get("/api/users",{params:t});return i.value=d.meta,k.value=d.data,d.data},E=async()=>{const{data:e}=await _e.apiClient.get("/api/positions").then(({status:t,data:d})=>({status:t,data:d}));C.value=e.data};ce(async()=>{E()});const u=r(!1),U={name:"",number:void 0,position_id:void 0,current_team_id:void 0},l=de({...U}),P=()=>{Object.assign(l,{},U),u.value=!1},O=()=>{l!=null&&l.id?x.put(`/api/users/${l.id}`,l).then(()=>{var e;P(),(e=f.value)==null||e.refresh()}):x.post("/api/users",l).then(()=>{var e;(e=f.value)==null||e.refresh()})},W=e=>{x.get(`/api/users/${e.id}`).then(({data:t})=>{B.value=t.teams,Object.assign(l,t),u.value=!0})},j=e=>e,S=re(),z=ue(),H=async()=>{u.value=!1};return L(u,e=>{e===!0?S.push({hash:"#/form"}):S.push({hash:""})}),L(()=>z.hash,async e=>{e||H()}),(e,t)=>{const d=me,p=fe,_=ve,v=R,I=J,Q=A,Y=be,F=ge,Z=he,ee=xe,te=J,y=R,ae=ye,se=A,ne=we,oe=Ce;return b(),V(ne,{fluid:""},{default:s(()=>[u.value?N((b(),V(F,{key:0,class:"mb-4 mt-5"},{default:s(()=>[n("span",Ue,[o(d,{variant:"dark",onClick:P},{default:s(()=>[h("x")]),_:1})]),o(Y,{class:"gap-3"},{default:s(()=>[o(Q,null,{default:s(()=>[o(v,{md:"4"},{default:s(()=>[o(_,{label:"Nama:","label-class":"mb-0 pb-1",class:"mb-3"},{default:s(()=>[o(p,{modelValue:l.name,"onUpdate:modelValue":t[0]||(t[0]=a=>l.name=a)},null,8,["modelValue"])]),_:1}),o(_,{label:"NIP:","label-class":"mb-0 pb-1",class:"mb-3"},{default:s(()=>[o(p,{modelValue:l.number,"onUpdate:modelValue":t[1]||(t[1]=a=>l.number=a)},null,8,["modelValue"])]),_:1})]),_:1}),o(v,{md:"8"},{default:s(()=>[o(_,{label:"Jabatan:","label-class":"mb-0 pb-1",class:"mb-3"},{default:s(()=>[o(I,{modelValue:l.position_id,"onUpdate:modelValue":t[2]||(t[2]=a=>l.position_id=a),options:C.value,"value-field":"id","text-field":"name"},null,8,["modelValue","options"])]),_:1}),o(_,{label:"Letak Jabatan pada Unit Kerja:","label-class":"mb-0 pb-1",class:"mb-3"},{default:s(()=>[o(I,{modelValue:l.current_team_id,"onUpdate:modelValue":t[3]||(t[3]=a=>l.current_team_id=a),options:B.value,"value-field":"id","text-field":"name"},null,8,["modelValue","options"])]),_:1})]),_:1})]),_:1}),n("div",Pe,[o(d,{variant:"primary",class:"ms-auto",onClick:O},{default:s(()=>[h(c(l!=null&&l.id?"Update":"Create"),1)]),_:1})])]),_:1})]),_:1},512)),[[pe,u.value]]):(b(),V(F,{key:1,"body-class":"p-0"},{header:s(()=>[Se]),footer:s(()=>[n("div",We,[o(se,{class:"align-items-center text-sm"},{default:s(()=>[o(y,{class:"col-auto"},{default:s(()=>[o(te,{modelValue:m.value,"onUpdate:modelValue":t[4]||(t[4]=a=>m.value=a),options:[5,10,15,25,100],class:"me-3 form-control-sm",onChange:T},null,8,["modelValue"])]),_:1}),o(y,null,{default:s(()=>[h(" Showing "+c(i.value.from)+" to "+c(i.value.to)+" of "+c(i.value.total)+" items ",1)]),_:1}),o(y,{md:"6",class:"align-right"},{default:s(()=>[o(ae,{modelValue:i.value.current_page,"onUpdate:modelValue":t[5]||(t[5]=a=>i.value.current_page=a),pills:"","total-rows":i.value.total,"per-page":i.value.per_page,"aria-controls":"table",class:"my-0 justify-content-end",onChange:X},null,8,["modelValue","total-rows","per-page"])]),_:1})]),_:1})])]),default:s(()=>[o(ee,{id:"table",ref_key:"table",ref:f,items:k.value,provider:D,fields:K,hover:!0,"current-page":i.value.current_page,"table-busy":!1,"no-provider":[],"no-provider-paging":!1,tableClass:"text-xs w-100",small:!1,"show-empty":!0,align:"middle","table-classes":["text-xs"],responsive:!0,stacked:"md"},{"cell(action)":s(({item:a})=>[n("div",Ie,[n("a",{href:"javascript:;",class:"badge badge-sm bg-gradient-warning text-xs mx-2",title:"Edit","item-id":`${a.id}`,onClick:w=>W(a)},Ne,8,Fe)])]),"cell(name)":s(({item:a})=>[n("div",$e,[o(Z,{text:q(a.name),rounded:"",variant:"light",class:"avatar avatar-md"},null,8,["text"]),n("div",Re,[n("h6",Je,c(a.name),1),n("p",Ae,c(a.number),1)])])]),"cell(account)":s(({item:a})=>[n("div",Ge,[n("div",Ke,[n("h6",Me,c(a.username),1),n("p",Te,c(a.email),1)])])]),"cell(unit)":s(({item:a})=>{var w;return[n("div",Xe,[n("div",qe,[n("h6",De,c(M(a.current_team).name),1),a.current_position?(b(),$("p",Ee,c((w=j(a.current_position))==null?void 0:w.name),1)):N((b(),$("i",{key:1,class:"text-xxs text-secondary mb-0 text-danger text-ellipsis cursor-pointer",title:`${a==null?void 0:a.position}`},[h(" Jabatan belum ditentukan. ")],8,Oe)),[[oe,void 0,void 0,{hover:!0,top:!0}]])])])]}),_:1},8,["items","current-page"])]),_:1}))]),_:1})}}});const He=Be(je,[["__scopeId","data-v-5bfea29b"]]);export{He as default};
