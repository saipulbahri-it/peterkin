import{d as W,G as X,i as Y,r as C,O as Z,a as ss,o,I as L,j as i,e as s,b as c,p as l,g as f,h as d,f as I,F as N,l as O,t as h,a3 as P,J as y,a0 as ts,a1 as as,a4 as es,a5 as ns,a6 as os,M as is,n as ls,a7 as ds,a8 as cs,S as rs,a9 as us}from"./index_c330695b.js";const _s=s("h3",{class:"mb-4 text-white"},"Tugas hari ini",-1),ps={class:"row my-4"},ms={class:"col-12 gap-3 d-flex"},bs=s("i",{class:"fas fa-plus","aria-hidden":"true"},null,-1),hs=s("i",{class:"fas fa-plus","aria-hidden":"true"},null,-1),gs={class:"col-12"},fs={class:"float-end",style:{position:"absolute",right:"10px",top:"-20px"}},ks={class:"pt-3"},vs={key:0,class:"text-xs list-group list-group-numbered"},xs={"data-v-1986abaa":"",class:"list-group-item d-flex align-items-start py-2 pe-2"},ys={"data-v-1986abaa":"",class:"ms-2 w-100 d-flex"},ws={"data-v-1986abaa":"",class:"fw-bold"},Cs={key:1,class:"alert alert-warning text-white"},Ts={key:2},js={key:1,class:"card mb-4"},Bs={class:"card-body p-3"},Ds={class:"float-end",style:{position:"absolute",right:"10px",top:"-20px"}},$s={class:"d-flex"},Vs={class:"card"},Fs={class:"card-body p-3"},Ss={class:"list-group list-group-flush list-group-numbered-","data-toggle":"checklist"},Ls={class:"list-group-item border-0 flex-column align-items-start ps-0 py-0 mb-3"},Is={class:"checklist-item checklist-item-warning ps-0 ms-0"},Ns={class:"d-flex align-items-center"},Os={class:"mb-0 text-dark font-weight-bold text-sm"},Ps=s("i",{class:"fa fs-6 fa-ellipsis-v",title:"...","aria-hidden":"true"},".",-1),Us=s("i",{class:"fa fa-edit me-1"},null,-1),zs=s("i",{class:"fa fa-trash me-1"},null,-1),Gs={class:"text-xxs ps-4 mb-1"},Js={class:"d-flex justify-content-between align-items-center ms-4 mt-0"},Es=s("span",{class:"text-xs me-1 text-secondary font-weight-bold"},"Sumber : ",-1),Ms={key:0,class:"text-xs font-weight-bolder text-primary"},Rs={key:1,class:"text-xs font-weight-bolder"},As={class:"ms-auto text-end"},Hs=s("span",{class:"text-xs text-secondary font-weight-bold me-1"}," Status : ",-1),qs=s("hr",{class:"horizontal dark mt-4 mb-0"},null,-1),Ks={key:0,class:"list-group-item border-0 flex-column align-items-start ps-0 py-0 mb-3"},Qs=s("strong",null,"Tupoksi",-1),Ws=s("br",null,null,-1),tt=W({__name:"ListTugas",setup(Xs){var F;const _=(F=X(Y("user")))==null?void 0:F.value,u=C(!1),p=C(!1),T=C([]),j=C([]),k=async()=>{const{status:n,data:t}=await P.apiClient.get("/api/task").then(({status:r,data:g})=>({status:r,data:g}));T.value=t.data},U=async n=>{const{status:t,summary_tasks:r,job_descs:g}=await P.apiClient.get(`/api/position/${n}`).then(({status:$,data:v})=>{let V=v.job_descs,x=v.summary_tasks;return{status:$,summary_tasks:x,job_descs:V}});j.value=g};Z(()=>{k()});const m={id:void 0,title:"",description:""},a=ss({...m}),z=()=>{u.value=!0,p.value=!u.value,m.job_desc_id=void 0,Object.assign(a,{},m)},G=()=>{u.value=!1,p.value=!u.value,_!=null&&_.position_id&&U(_==null?void 0:_.position_id)},J=n=>{p.value=!(u.value=!0),m.job_desc_id=n.id,m.description=n.title,Object.assign(a,{},m)},E=()=>{p.value=!1},B=()=>{Object.assign(a,{},m),u.value=!1},M=()=>{a!=null&&a.id?y.put(`/api/task/${a.id}`,a).then(({status:n,data:t})=>{B(),k()}):y.post("/api/task",a).then(({status:n,data:t})=>{B(),k()})},R=n=>{y.get(`/api/task/${n.id}`).then(({status:t,data:r})=>{Object.assign(a,r),u.value=!0,p.value=!1})},D=(n,t)=>{y.post(`/api/task/${n.id}/setStatus`,{task_status:t}).then(({status:r,data:g})=>{k()})},A=n=>{y.delete(`/api/task/${n.id}`).then(({status:t,data:r})=>{k()})},H=n=>{let t;switch(n){case"Done":t="bg-gradient-success";break;case"In-Progress":t="bg-gradient-warning";break;case"To-Do":t="bg-gradient-secondary";break;default:t="bg-gradient-dark";break}return t};return(n,t)=>{const r=ts,g=as,$=es,v=ns,V=os,x=ds,q=cs,S=rs,K=us,Q=is;return o(),L(Q,{fluid:""},{default:i(()=>[_s,s("div",ps,[s("div",ms,[p.value?f("",!0):(o(),c("a",{key:0,class:"btn bg-gradient-info mb-4 mr-auto d-flex align-items-center",href:"javascript:;",onClick:G},[bs,l("  Daftar Tupoksi ")])),u.value?f("",!0):(o(),c("a",{key:1,class:"btn bg-gradient-dark mb-4 ms-auto",href:"javascript:;",onClick:z},[hs,l("   Tugas Baru ")]))]),s("div",gs,[p.value?(o(),L(g,{key:0,class:"mb-4"},{default:i(()=>{var e,w;return[s("span",fs,[d(r,{variant:"dark",onClick:E},{default:i(()=>[l("x")]),_:1})]),s("div",ks,[(e=I(_))!=null&&e.position_id?(o(),c("ol",vs,[(o(!0),c(N,null,O(j.value,(b,Ys)=>(o(),c("li",xs,[s("div",ys,[s("div",ws,h(b.title),1),d(r,{variant:"info",size:"sm",class:"btn badge-sm bg-gradient-info ms-auto d-flex align-self-center",onClick:Zs=>J(b)},{default:i(()=>[l(" Pilih ")]),_:2},1032,["onClick"])])]))),256))])):(o(),c("div",Cs," Tupoksi tidak tersedia karena user ini belum ditentukan jabatan ")),j.value.length===0?(o(),c("div",Ts,[l(" Tupoksi tidak tersedia pada jabatan "),s("strong",null,h((w=I(_))==null?void 0:w.position),1)])):f("",!0)])]}),_:1})):f("",!0),u.value?(o(),c("div",js,[s("div",Bs,[s("span",Ds,[d(r,{variant:"info",onClick:B},{default:i(()=>[l("x")]),_:1})]),d(v,{label:"Judul:","label-class":"mb-0 pb-0",class:"mb-2"},{default:i(()=>[d($,{modelValue:a.title,"onUpdate:modelValue":t[0]||(t[0]=e=>a.title=e)},null,8,["modelValue"])]),_:1}),d(v,{label:"Rincian Tugas:","label-class":"mb-0 pb-0",class:"mb-3"},{default:i(()=>[d(V,{modelValue:a.description,"onUpdate:modelValue":t[1]||(t[1]=e=>a.description=e),disabled:!!a.job_desc_id},null,8,["modelValue","disabled"])]),_:1}),s("div",$s,[d(r,{variant:"primary",class:"ms-auto",onClick:M},{default:i(()=>[l(h(a!=null&&a.id?"Update":"Create"),1)]),_:1})])])])):f("",!0),s("div",Vs,[s("div",Fs,[s("ul",Ss,[(o(!0),c(N,null,O(T.value,(e,w)=>(o(),c("li",Ls,[s("div",Is,[s("div",Ns,[s("h6",Os,h(w+1)+". "+h(e.title),1),d(K,{"no-caret":!0,"menu-class":"dropdown-menu-end px-2 py-2 top-4 me-sm-n4 me-n4","toggle-class":"px-1 btn-xs",variant:"link",class:"dropdown float-lg-end ms-auto pe-1"},{"button-content":i(()=>[Ps]),default:i(()=>[d(x,{variant:"secondary",onClick:b=>D(e,"To-Do")},{default:i(()=>[l(" To-Do")]),_:2},1032,["onClick"]),d(x,{variant:"warning",onClick:b=>D(e,"In-Progress")},{default:i(()=>[l(" In-Progress")]),_:2},1032,["onClick"]),d(x,{variant:"success",onClick:b=>D(e,"Done")},{default:i(()=>[l(" Done ")]),_:2},1032,["onClick"]),d(q),d(S,{class:"border-radius-md text-warning",onClick:b=>R(e)},{default:i(()=>[Us,l("Edit ")]),_:2},1032,["onClick"]),d(S,{variant:"danger",class:"border-radius-md",onClick:b=>A(e)},{default:i(()=>[zs,l(" Hapus ")]),_:2},1032,["onClick"])]),_:2},1024)]),s("p",Gs,h(e.description),1),s("div",Js,[s("div",null,[Es,e.job_desc_id?(o(),c("span",Ms," Tupoksi ")):(o(),c("span",Rs,"Lainnya"))]),s("div",As,[Hs,s("span",{class:ls(["badge badge-sm text-xxs",H(e.task_status)])},h(e.task_status),3)])])]),qs]))),256)),T.value.length===0?(o(),c("li",Ks,[l(" Tugas hari ini tidak tersedia. silahkan buat tugas harian anda dengan memilih daftar "),Qs,l(" : atau "),Ws,l(" tambah tugas baru jika tugas anda tidak ada dalam Tupoksi jabatan anda. ")])):f("",!0)])])])])])]),_:1})}}});export{tt as default};
