import{d as X,G as Y,i as Z,r as w,P as ss,a as ts,o as d,I as S,j as i,e as s,b as c,p as l,g as f,h as n,f as I,F as N,l as U,t as m,a3 as G,J as x,a1 as as,N as es,a4 as os,a5 as ns,a6 as is,a7 as ls,M as ds,n as cs,a8 as us,a9 as rs,V as _s,aa as ps}from"./index_85e5a85c.js";const ms=s("h3",{class:"mb-4 text-white"},"Tugas hari ini",-1),bs={class:"row my-4"},hs={class:"col-12 gap-3 d-flex"},gs=s("i",{class:"fas fa-plus","aria-hidden":"true"},null,-1),ks=s("i",{class:"fas fa-plus","aria-hidden":"true"},null,-1),vs={class:"col-12"},fs={class:"float-end",style:{position:"absolute",right:"10px",top:"-20px"}},xs={class:"pt-3"},ys={key:0},ws={key:0,class:"text-xs list-group list-group-numbered"},Cs={"data-v-1986abaa":"",class:"list-group-item d-flex align-items-start py-2 pe-2"},Ts={"data-v-1986abaa":"",class:"ms-2 w-100 d-flex"},js={"data-v-1986abaa":"",class:"fw-bold"},Bs={key:1,class:"alert alert-warning"},Vs={key:1,class:"alert alert-warning text-white"},Ds={key:1,class:"card mb-4"},$s={class:"card-body p-3"},Fs={class:"float-end",style:{position:"absolute",right:"10px",top:"-20px"}},Ls={class:"d-flex"},Ps={class:"card"},Ss={class:"card-body p-3"},Is={class:"list-group list-group-flush list-group-numbered-","data-toggle":"checklist"},Ns={class:"list-group-item border-0 flex-column align-items-start px-0 py-0 mb-3"},Us={class:"checklist-item checklist-item-warning ps-0 ms-0"},Gs=s("i",{class:"fa fs-6 fa-ellipsis-v",title:"...","aria-hidden":"true"},null,-1),Os=s("i",{class:"fa fa-edit me-1"},null,-1),zs=s("i",{class:"fa fa-trash me-1"},null,-1),As={class:"d-flex align-items-center"},Js={class:"mb-0 text-dark font-weight-bold text-sm"},Rs={class:"text-xxs mb-1"},Es={class:"d-flex justify-content-between align-items-center mt-0"},Ms=s("span",{class:"text-xs me-1 text-secondary font-weight-bold"},"Sumber : ",-1),Hs={class:"text-xs font-weight-bolder"},Qs={class:"ms-auto text-end"},qs=s("span",{class:"text-xs text-secondary font-weight-bold me-1"}," Status : ",-1),Ks=s("hr",{class:"horizontal dark mt-4 mb-0"},null,-1),Ws={key:0,class:"list-group-item border-0 flex-column align-items-start ps-0 py-0 mb-3"},Xs=s("strong",null,"Tupoksi",-1),Ys=s("br",null,null,-1),et=X({__name:"ListTugas",setup(Zs){var L;const p=(L=Y(Z("user")))==null?void 0:L.value,_=w(!1),b=w(!1),C=w([]),T=w([]),k=async()=>{const{status:o,data:t}=await G.apiClient.get("/api/task").then(({status:u,data:g})=>({status:u,data:g}));C.value=t.data},O=async o=>{const{status:t,summary_tasks:u,job_descs:g}=await G.apiClient.get(`/api/position/${o}`).then(({status:V,data:v})=>{let D=v.job_descs,$=v.summary_tasks;return{status:V,summary_tasks:$,job_descs:D}});T.value=g};ss(()=>{k()});const r={id:void 0,job_desc_id:void 0,title:"",description:"",task_source:""},a=ts({...r}),z=()=>{_.value=!0,b.value=!_.value,r.job_desc_id=void 0,r.description="",r.task_source="Lainnya",Object.assign(a,{},r)},A=()=>{_.value=!1,b.value=!_.value,p!=null&&p.position_id&&O(p==null?void 0:p.position_id)},J=o=>{b.value=!(_.value=!0),r.job_desc_id=o.id,r.description=o.title,r.task_source="Tupoksi",Object.assign(a,{},r)},R=()=>{b.value=!1},j=()=>{Object.assign(a,{},r),_.value=!1},E=()=>{a!=null&&a.id?x.put(`/api/task/${a.id}`,a).then(({status:o,data:t})=>{j(),k()}):x.post("/api/task",a).then(({status:o,data:t})=>{j(),k()})},M=o=>{x.get(`/api/task/${o.id}`).then(({status:t,data:u})=>{Object.assign(a,u),_.value=!0,b.value=!1})},B=(o,t)=>{x.post(`/api/task/${o.id}/setStatus`,{task_status:t}).then(({status:u,data:g})=>{k()})},H=o=>{x.delete(`/api/task/${o.id}`).then(({status:t,data:u})=>{k()})},Q=o=>{let t;switch(o){case"Done":t="bg-gradient-success";break;case"In-Progress":t="bg-gradient-warning";break;case"To-Do":t="bg-gradient-secondary";break;default:t="bg-gradient-dark";break}return t};return(o,t)=>{const u=as,g=es,V=os,v=ns,D=is,$=ls,F=us,q=rs,P=_s,K=ps,W=ds;return d(),S(W,{fluid:""},{default:i(()=>[ms,s("div",bs,[s("div",hs,[b.value?f("",!0):(d(),c("a",{key:0,class:"btn bg-gradient-info mb-4 mr-auto d-flex align-items-center",href:"javascript:;",onClick:A},[gs,l("  Daftar Tupoksi ")])),_.value?f("",!0):(d(),c("a",{key:1,class:"btn bg-gradient-dark mb-4 ms-auto",href:"javascript:;",onClick:z},[ks,l("   Tugas Baru ")]))]),s("div",vs,[b.value?(d(),S(g,{key:0,class:"mb-4"},{default:i(()=>{var e,y;return[s("span",fs,[n(u,{variant:"dark",onClick:R},{default:i(()=>[l("x")]),_:1})]),s("div",xs,[(e=I(p))!=null&&e.position_id?(d(),c("div",ys,[T.value.length>0?(d(),c("ol",ws,[(d(!0),c(N,null,U(T.value,(h,st)=>(d(),c("li",Cs,[s("div",Ts,[s("div",js,m(h.title),1),n(u,{variant:"info",size:"sm",class:"btn badge-sm bg-gradient-info ms-auto d-flex align-self-center",onClick:tt=>J(h)},{default:i(()=>[l(" Pilih ")]),_:2},1032,["onClick"])])]))),256))])):(d(),c("div",Bs,[l(" Tupoksi tidak tersedia pada jabatan "),s("strong",null,m((y=I(p))==null?void 0:y.position),1)]))])):(d(),c("div",Vs," Tupoksi tidak tersedia karena user ini belum ditentukan jabatan "))])]}),_:1})):f("",!0),_.value?(d(),c("div",Ds,[s("div",$s,[s("span",Fs,[n(u,{variant:"info",onClick:j},{default:i(()=>[l("x")]),_:1})]),n(v,{label:"Judul:","label-class":"mb-0 pb-0",class:"mb-2"},{default:i(()=>[n(V,{modelValue:a.title,"onUpdate:modelValue":t[0]||(t[0]=e=>a.title=e)},null,8,["modelValue"])]),_:1}),n(v,{label:"Rincian Tugas:","label-class":"mb-0 pb-0",class:"mb-3"},{default:i(()=>[n(D,{modelValue:a.description,"onUpdate:modelValue":t[1]||(t[1]=e=>a.description=e),disabled:!!a.job_desc_id},null,8,["modelValue","disabled"])]),_:1}),s("div",Ls,[n($,{modelValue:a.task_source,"onUpdate:modelValue":t[2]||(t[2]=e=>a.task_source=e),options:[{value:"Tupoksi",text:"Tupoksi"},{value:"Atasan",text:"Perintah Atasan"},{value:"Lainnya",text:"Lainnya"}]},null,8,["modelValue"]),n(u,{variant:"primary",class:"ms-auto",onClick:E},{default:i(()=>[l(m(a!=null&&a.id?"Update":"Create"),1)]),_:1})])])])):f("",!0),s("div",Ps,[s("div",Ss,[s("ul",Is,[(d(!0),c(N,null,U(C.value,(e,y)=>(d(),c("li",Ns,[s("div",Us,[n(K,{"no-caret":!0,"menu-class":"dropdown-menu-end px-2 py-2 top-4 me-sm-n3 me-n3","toggle-class":"px-1 btn-xs actions",variant:"link",class:"dropdown float-end ms-auto pe-0"},{"button-content":i(()=>[Gs]),default:i(()=>[n(F,{variant:"secondary",onClick:h=>B(e,"To-Do")},{default:i(()=>[l(" To-Do")]),_:2},1032,["onClick"]),n(F,{variant:"warning",onClick:h=>B(e,"In-Progress")},{default:i(()=>[l(" In-Progress")]),_:2},1032,["onClick"]),n(F,{variant:"success",onClick:h=>B(e,"Done")},{default:i(()=>[l(" Done ")]),_:2},1032,["onClick"]),n(q),n(P,{class:"border-radius-md text-warning",onClick:h=>M(e)},{default:i(()=>[Os,l("Edit ")]),_:2},1032,["onClick"]),n(P,{variant:"danger",class:"border-radius-md",onClick:h=>H(e)},{default:i(()=>[zs,l(" Hapus ")]),_:2},1032,["onClick"])]),_:2},1024),s("div",As,[s("h6",Js,m(y+1)+". "+m(e.title),1)]),s("p",Rs,m(e.description),1),s("div",Es,[s("div",null,[Ms,s("span",Hs,m(e.task_source),1)]),s("div",Qs,[qs,s("span",{class:cs(["badge badge-sm text-xxs",Q(e.task_status)])},m(e.task_status),3)])])]),Ks]))),256)),C.value.length===0?(d(),c("li",Ws,[l(" Tugas hari ini tidak tersedia. silahkan buat tugas harian anda dengan memilih daftar "),Xs,l(" : atau "),Ys,l(" tambah tugas baru jika tugas anda tidak ada dalam Tupoksi jabatan anda. ")])):f("",!0)])])])])])]),_:1})}}});export{et as default};
